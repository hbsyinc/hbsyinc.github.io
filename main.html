<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pengajuan HBSyinc Syariah</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: { primary: "#2563eb", secondary: "#10b981" },
            borderRadius: {
              none: "0px",
              sm: "4px",
              DEFAULT: "8px",
              md: "12px",
              lg: "16px",
              xl: "20px",
              "2xl": "24px",
              "3xl": "32px",
              full: "9999px",
              button: "8px",
            },
          },
        },
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <style>
      :where([class^="ri-"])::before { content: "\f3c2"; }
      body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      }
      input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #2563eb;
      cursor: pointer;
      }
      input[type="range"]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #2563eb;
      cursor: pointer;
      }
      .custom-checkbox {
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      }
      .custom-checkbox input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
      }
      .checkmark {
      height: 20px;
      width: 20px;
      background-color: #fff;
      border: 2px solid #d1d5db;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      }
      .custom-checkbox input:checked ~ .checkmark {
      background-color: #2563eb;
      border-color: #2563eb;
      }
      .checkmark:after {
      content: "";
      display: none;
      }
      .custom-checkbox input:checked ~ .checkmark:after {
      display: block;
      width: 5px;
      height: 10px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
      }
      .custom-radio {
      position: relative;
      cursor: pointer;
      }
      .custom-radio input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
      }
      .radio-mark {
      height: 20px;
      width: 20px;
      background-color: #fff;
      border: 2px solid #d1d5db;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      }
      .custom-radio input:checked ~ .radio-mark {
      border-color: #2563eb;
      }
      .radio-mark:after {
      content: "";
      display: none;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #2563eb;
      }
      .custom-radio input:checked ~ .radio-mark:after {
      display: block;
      }
      .file-input-container {
      position: relative;
      overflow: hidden;
      }
      .file-input-container input[type="file"] {
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
      cursor: pointer;
      width: 100%;
      height: 100%;
      }
    </style>
  </head>
  <body>
    <div class="min-h-screen flex flex-col">
      <!-- Header -->
      <header class="bg-white shadow-sm">
        <div
          class="container mx-auto px-4 py-4 flex items-center justify-between"
        >
          <div class="flex items-center">
            <button
              class="w-10 h-10 flex items-center justify-center text-gray-700 mr-4"
            >
              <i class="ri-arrow-left-line ri-lg"></i>
            </button>
            <div class="flex items-center mb-3 md:mb-0">
<img src="image.jpg" alt="Hbsyinc Logo" class="h-12 md:h-16 mr-4">
</div>
          </div>
          <div
            class="flex items-center bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm"
          >
            <i class="ri-checkbox-circle-line ri-lg mr-1"></i>
            <span>Syariah Compliant</span>
          </div>
        </div>
      </header>
      <!-- Main Content -->
      <main class="flex-grow container mx-auto px-4 py-6 max-w-3xl">
        <h1 class="text-2xl font-bold text-gray-900 mb-2">
          Pengajuan HBSyinc Syariah
        </h1>
        <div class="bg-blue-50 border-l-4 border-primary p-4 mb-6 rounded">
          <div class="flex">
            <div class="w-8 h-8 flex items-center justify-center mr-3">
              <i class="ri-information-line ri-lg text-primary"></i>
            </div>
            <div>
              <h3 class="font-medium text-gray-900">Akad Murabahah</h3>
              <p class="text-sm text-gray-600">
                Pembiayaan dengan prinsip jual beli dimana harga pokok dan
                margin diketahui di awal akad.
              </p>
            </div>
          </div>
        </div>
        <!-- Informasi Akad Syariah -->
        <div class="bg-white rounded shadow-sm p-6 mb-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-3">
            Informasi Akad Syariah
          </h2>
          <p class="text-gray-600 mb-4">
            HBSyinc Syariah menggunakan skema pembiayaan berbasis akad
            Murabahah yang sesuai dengan prinsip syariah Islam.
          </p>
          <div class="space-y-2 mb-4">
            <div class="flex items-start">
              <div
                class="w-6 h-6 flex items-center justify-center text-primary mr-2"
              >
                <i class="ri-check-line"></i>
              </div>
              <p class="text-gray-700">Bebas riba dan bunga</p>
            </div>
            <div class="flex items-start">
              <div
                class="w-6 h-6 flex items-center justify-center text-primary mr-2"
              >
                <i class="ri-check-line"></i>
              </div>
              <p class="text-gray-700">Biaya dan margin yang transparan</p>
            </div>
          </div>
          <a href="#" class="text-primary font-medium flex items-center">
            Pelajari lebih lanjut tentang akad Murabahah
            <i class="ri-arrow-right-line ml-1"></i>
          </a>
        </div>
        <!-- Form Input Data Diri -->
        <form id="pengajuanForm" action="https://formspree.io/f/xnnpgyzg" method="POST" enctype="multipart/form-data">
        <div class="bg-white rounded shadow-sm p-6 mb-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">Data Diri</h2>
          <div class="space-y-4">
            <div>
              <label
                for="nama"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Nama Lengkap (sesuai KTP)</label
              >
              <input
                type="text"
                id="nama"
                name="nama"
                class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                placeholder="Masukkan nama lengkap"
                required
              />
            </div>
            <div>
              <label
                for="nik"
                class="block text-sm font-medium text-gray-700 mb-1"
                >NIK</label
              >
              <input
                type="text"
                id="nik"
                name="nik"
                class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                placeholder="Masukkan 16 digit NIK"
                required
              />
            </div>
            <div>
              <label
                for="phone"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Nomor Handphone</label
              >
              <input
                type="tel"
                id="phone"
                name="phone"
                class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                placeholder="Contoh: 08123456789"
                required
              />
            </div>
            <div>
              <label
                for="email"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Email</label
              >
              <input
                type="email"
                id="email"
                name="email"
                class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                placeholder="Contoh: nama@email.com"
                required
              />
            </div>
            <div>
              <label
                for="alamat"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Alamat Lengkap</label
              >
              <textarea
                id="alamat"
                name="alamat"
                rows="3"
                class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                placeholder="Masukkan alamat lengkap"
                required
              ></textarea>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1"
                >Status Pernikahan</label
              >
              <div class="flex space-x-4">
                <label class="custom-radio flex items-center">
                  <input type="radio" name="status" value="single" required />
                  <span class="radio-mark mr-2"></span>
                  <span>Belum Menikah</span>
                </label>
                <label class="custom-radio flex items-center">
                  <input type="radio" name="status" value="married" />
                  <span class="radio-mark mr-2"></span>
                  <span>Sudah Menikah</span>
                </label>
              </div>
            </div>
            <div>
              <label
                for="pekerjaan"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Pekerjaan</label
              >
              <select
                id="pekerjaan"
                name="pekerjaan"
                class="w-full px-4 py-2 pr-8 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent appearance-none bg-white"
                required
              >
                <option value="" disabled selected>Pilih pekerjaan</option>
                <option value="pns">PNS</option>
                <option value="swasta">Karyawan Swasta</option>
                <option value="wirausaha">Wirausaha</option>
                <option value="profesional">Profesional</option>
                <option value="petani">Petani</option>
                <option value="lainnya">Lainnya</option>
              </select>
            </div>
          </div>
        </div>
        <!-- Upload Dokumen -->
        <div class="bg-white rounded shadow-sm p-6 mb-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">Upload Dokumen</h2>
          <div class="space-y-4">
            
            <!-- Foto KTP -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Foto KTP</label>
              <div id="ktp-box" class="file-input-container border-2 border-dashed border-gray-300 rounded p-4 text-center transition-colors duration-300">
                <div class="w-12 h-12 mx-auto flex items-center justify-center bg-blue-50 rounded-full text-primary mb-2">
                  <i class="ri-id-card-line ri-xl"></i>
                </div>
                <p class="text-sm text-gray-500 mb-2">Unggah foto KTP yang jelas dan tidak buram</p>
                <button type="button" class="px-4 py-2 bg-gray-100 text-gray-700 rounded text-sm font-medium" onclick="document.getElementById('ktp-input').click()">Pilih File</button>
                <input id="ktp-input" type="file" name="ktp" accept="image/*" class="hidden" onchange="fileUploaded(this, 'ktp-box', 'ktp-preview')" required />
                <div id="ktp-preview" class="mt-4 text-sm text-gray-600"></div>
              </div>
            </div>

            <!-- Selfie dengan KTP -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Selfie dengan KTP</label>
              <div id="selfie-box" class="file-input-container border-2 border-dashed border-gray-300 rounded p-4 text-center transition-colors duration-300">
                <div class="w-12 h-12 mx-auto flex items-center justify-center bg-blue-50 rounded-full text-primary mb-2">
                  <i class="ri-camera-line ri-xl"></i>
                </div>
                <p class="text-sm text-gray-500 mb-2">Unggah foto selfie dengan memegang KTP</p>
                <button type="button" class="px-4 py-2 bg-gray-100 text-gray-700 rounded text-sm font-medium" onclick="document.getElementById('selfie-input').click()">Pilih File</button>
                <input id="selfie-input" type="file" name="selfie_ktp" accept="image/*" class="hidden" onchange="fileUploaded(this, 'selfie-box', 'selfie-preview')" required />
                <div id="selfie-preview" class="mt-4 text-sm text-gray-600"></div>
              </div>
            </div>

            <!-- Slip Gaji -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Slip Gaji/Bukti Penghasilan</label>
              <div id="gaji-box" class="file-input-container border-2 border-dashed border-gray-300 rounded p-4 text-center transition-colors duration-300">
                <div class="w-12 h-12 mx-auto flex items-center justify-center bg-blue-50 rounded-full text-primary mb-2">
                  <i class="ri-file-list-3-line ri-xl"></i>
                </div>
                <p class="text-sm text-gray-500 mb-2">Unggah bukti penghasilan 3 bulan terakhir</p>
                <button type="button" class="px-4 py-2 bg-gray-100 text-gray-700 rounded text-sm font-medium" onclick="document.getElementById('gaji-input').click()">Pilih File</button>
                <input id="gaji-input" type="file" name="slip_gaji" accept="image/*,application/pdf" class="hidden" onchange="fileUploaded(this, 'gaji-box', 'gaji-preview')" required />
                <div id="gaji-preview" class="mt-4 text-sm text-gray-600"></div>
              </div>
            </div>

          </div>
        </div>
        <!-- Pengajuan Pembiayaan -->
        <div class="bg-white rounded shadow-sm p-6 mb-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">
            Pengajuan Pembiayaan
          </h2>
          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Nominal Pembiayaan</label
            >
            <div class="mb-2">
              <span
                class="text-2xl font-bold text-gray-900"
                id="nominal-display"
                >Rp 5.000.000</span
              >
              <input type="hidden" id="nominal-value" name="nominal_pembiayaan" value="5000000">
            </div>
            <input
              type="range"
              min="100000"
              max="10000000"
              step="100000"
              value="5000000"
              class="w-full h-2 bg-gray-200 rounded-full appearance-none"
              id="nominal-slider"
            />
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>Rp 100.000</span>
              <span>Rp 10.000.000</span>
            </div>
          </div>
          <div class="bg-gray-50 p-4 rounded mb-6">
            <h3 class="font-medium text-gray-900 mb-3">Rincian Pembiayaan</h3>
            <div class="space-y-2">
              <div class="flex justify-between">
                <span class="text-gray-600">Harga Pokok</span>
                <span class="font-medium" id="harga-pokok">Rp 5.000.000</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Margin</span>
                <span class="font-medium" id="margin">Rp 200.000</span>
                <input type="hidden" id="margin-value" name="margin" value="200000">
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Biaya Admin</span>
                <span class="font-medium" id="admin">Rp 55.000</span>
                <input type="hidden" id="admin-value" name="biaya_admin" value="55000">
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">Total Ujrah</span>
                <span class="font-medium" id="ujrah">Rp 255.000</span>
                <input type="hidden" id="ujrah-value" name="total_ujrah" value="255000">
              </div>
              <div class="border-t border-gray-200 pt-2 mt-2">
                <div class="flex justify-between font-medium">
                  <span>Total Pembiayaan</span>
                  <span class="text-primary" id="total-pembiayaan"
                    >Rp 5.255.000</span
                  >
                  <input type="hidden" id="total-pembiayaan-value" name="total_pembiayaan" value="5255000">
                </div>
              </div>
            </div>
          </div>
          <div>
            <h3 class="font-medium text-gray-900 mb-3">
              Pilih Tenor Pembayaran
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
              <!-- Tenor 1 Bulan -->
              <label
                class="border rounded p-4 cursor-pointer hover:border-primary transition-colors"
                id="tenor-1"
              >
                <div class="flex items-start">
                  <div class="custom-radio flex items-center mt-1">
                    <input type="radio" name="tenor" value="1" checked required />
                    <span class="radio-mark mr-2"></span>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-900">1 Bulan</h4>
                    <div class="mt-2 space-y-1">
                      <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Angsuran/bulan</span>
                        <span class="font-medium">Rp 5.250.000</span>
                        <input type="hidden" id="angsuran-1" name="angsuran_1" value="5250000">
                      </div>
                      <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Total Ujrah</span>
                        <span class="font-medium">Rp 250.000</span>
                      </div>
                    </div>
                  </div>
                </div>
              </label>
              <!-- Tenor 3 Bulan -->
              <label
                class="border rounded p-4 cursor-pointer hover:border-primary transition-colors"
                id="tenor-3"
              >
                <div class="flex items-start">
                  <div class="custom-radio flex items-center mt-1">
                    <input type="radio" name="tenor" value="3" />
                    <span class="radio-mark mr-2"></span>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-900">3 Bulan</h4>
                    <div class="mt-2 space-y-1">
                      <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Angsuran/bulan</span>
                        <span class="font-medium">Rp 1.850.000</span>
                        <input type="hidden" id="angsuran-3" name="angsuran_3" value="1850000">
                      </div>
                      <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Total Ujrah</span>
                        <span class="font-medium">Rp 550.000</span>
                      </div>
                    </div>
                  </div>
                </div>
              </label>
              <!-- Tenor 6 Bulan -->
              <label
                class="border rounded p-4 cursor-pointer hover:border-primary transition-colors"
                id="tenor-6"
              >
                <div class="flex items-start">
                  <div class="custom-radio flex items-center mt-1">
                    <input type="radio" name="tenor" value="6" />
                    <span class="radio-mark mr-2"></span>
                  </div>
                  <div>
                    <h4 class="font-medium text-gray-900">6 Bulan</h4>
                    <div class="mt-2 space-y-1">
                      <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Angsuran/bulan</span>
                        <span class="font-medium">Rp 975.000</span>
                        <input type="hidden" id="angsuran-6" name="angsuran_6" value="975000">
                      </div>
                      <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Total Ujrah</span>
                        <span class="font-medium">Rp 850.000</span>
                      </div>
                    </div>
                  </div>
                </div>
              </label>
            </div>
          </div>
        </div>
        <!-- Persetujuan Syariah -->
        <div class="bg-white rounded shadow-sm p-6 mb-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">Persetujuan</h2>
          <div class="space-y-4">
            <label class="custom-checkbox flex items-start">
              <input type="checkbox" id="akad-agreement" name="akad_agreement" required />
              <span class="checkmark mt-0.5 mr-3"></span>
              <span class="text-sm text-gray-700">
                Saya menyetujui dan memahami Akad Murabahah yang digunakan dalam
                pembiayaan ini dan menyatakan bahwa seluruh data yang saya
                berikan adalah benar.
              </span>
            </label>
            <label class="custom-checkbox flex items-start">
              <input type="checkbox" id="terms-agreement" name="terms_agreement" required />
              <span class="checkmark mt-0.5 mr-3"></span>
              <span class="text-sm text-gray-700">
                Saya menyetujui
                <a href="#" class="text-primary">Syarat dan Ketentuan</a> serta
                <a href="#" class="text-primary">Kebijakan Privasi</a> yang
                berlaku.
              </span>
            </label>
          </div>
          <div class="mt-4 p-4 bg-blue-50 rounded">
            <h3 class="font-medium text-gray-900 mb-2">Hak dan Kewajiban</h3>
            <p class="text-sm text-gray-600 mb-2">
              Sebagai nasabah, Anda memiliki kewajiban untuk:
            </p>
            <ul class="text-sm text-gray-600 list-disc pl-5 space-y-1">
              <li>
                Melunasi angsuran tepat waktu sesuai jadwal yang disepakati
              </li>
              <li>Memberikan informasi yang benar dan akurat</li>
              <li>Menggunakan dana sesuai dengan tujuan yang diajukan</li>
            </ul>
            <p class="text-sm text-gray-600 mt-2">
              <a href="#" class="text-primary">Lihat dokumen akad lengkap</a>
            </p>
          </div>
        </div>
        <!-- Tombol Pengajuan -->
        <button
          id="submit-button"
          type="submit"
          class="w-full bg-primary text-white font-medium py-3 px-4 rounded-button shadow-sm hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed !rounded-button"
          disabled
        >
          Ajukan Pembiayaan Syariah
        </button>
        </form>
      </main>
      <!-- Footer -->
      <footer class="bg-white border-t border-gray-200 mt-8">
        <div class="container mx-auto px-4 py-6 max-w-3xl">
          <div class="mb-4 text-center">
            <div class="flex items-center justify-center mb-2">
              <div class="w-6 h-6 flex items-center justify-center mr-2">
                <i class="ri-time-line text-gray-500"></i>
              </div>
              <span class="text-sm text-gray-600"
                >Estimasi proses: 1-3 hari kerja</span
              >
            </div>
          </div>
          <div
            class="flex flex-col md:flex-row justify-between items-center text-sm text-gray-600"
          >
            <div class="mb-4 md:mb-0">
              <div class="flex items-center">
                <div class="w-5 h-5 flex items-center justify-center mr-1">
                  <i class="ri-customer-service-2-line"></i>
                </div>
                <span>Hubungi kami: 085748575651</span>
              </div>
            </div>
            <div>
              <span class="text-gray-600">Alamat: Bendo, Padas, Ngawi</span>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script>
      // Nominal slider
      const nominalSlider = document.getElementById("nominal-slider");
      const nominalDisplay = document.getElementById("nominal-display");
      const nominalValue = document.getElementById("nominal-value");
      const hargaPokok = document.getElementById("harga-pokok");
      const ujrah = document.getElementById("ujrah");
      const ujrahValue = document.getElementById("ujrah-value");
      const totalPembiayaan = document.getElementById("total-pembiayaan");
      const totalPembiayaanValue = document.getElementById("total-pembiayaan-value");
      const marginValue = document.getElementById("margin-value");
      const adminValue = document.getElementById("admin-value");
      
      // Format currency
      function formatCurrency(amount) {
        return new Intl.NumberFormat("id-ID", {
          style: "currency",
          currency: "IDR",
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        })
          .format(amount)
          .replace("IDR", "Rp");
      }
      
      // Update nominal display and calculations
      function updateNominal() {
        const nominal = parseInt(nominalSlider.value);
        nominalValue.value = nominal;
        
        // Update displays
        nominalDisplay.textContent = formatCurrency(nominal);
        hargaPokok.textContent = formatCurrency(nominal);
        
        // Calculate ujrah based on nominal and selected tenor
        const selectedTenor = document.querySelector(
          'input[name="tenor"]:checked',
        ).value;
        let ujrahRate = 0.05; // Default for 1 month
        if (selectedTenor === "3") ujrahRate = 0.09;
        if (selectedTenor === "6") ujrahRate = 0.15;
        
        // Calculate margin based on nominal range
        let marginAmount = 0;
        let adminAmount = 0;
        if (nominal < 500000) {
          marginAmount = 20000;
          adminAmount = 15000;
        } else if (nominal < 1000000) {
          marginAmount = 50000;
          adminAmount = 30000;
        } else if (nominal < 5000000) {
          marginAmount = 100000;
          adminAmount = 45000;
        } else {
          marginAmount = Math.round(nominal * 0.04);
          adminAmount = 55000;
        }
        
        const ujrahAmount = marginAmount + adminAmount;
        document.getElementById("margin").textContent = formatCurrency(marginAmount);
        document.getElementById("admin").textContent = formatCurrency(adminAmount);
        ujrah.textContent = formatCurrency(ujrahAmount);
        
        // Update hidden values
        marginValue.value = marginAmount;
        adminValue.value = adminAmount;
        ujrahValue.value = ujrahAmount;
        
        // Calculate total
        const total = nominal + ujrahAmount;
        totalPembiayaan.textContent = formatCurrency(total);
        totalPembiayaanValue.value = total;
        
        // Update tenor options
        updateTenorOptions(nominal, ujrahAmount);
      }
      
      // Update tenor options based on nominal
      function updateTenorOptions(nominal, ujrahAmount) {
        const tenors = [
          { months: 1, multiplier: 1 },
          { months: 3, multiplier: 1 },
          { months: 6, multiplier: 1 },
        ];
        
        tenors.forEach((tenor) => {
          const element = document.getElementById(`tenor-${tenor.months}`);
          if (!element) return;
          
          // Use the same ujrah value for all tenors as per the table
          const total = nominal + ujrahAmount;
          
          // Pembulatan ke ribuan terdekat (1000)
          const monthlyPayment = Math.ceil(total / tenor.months / 1000) * 1000;
          
          // Update values in the tenor option
          const angsuranElement = element.querySelector(
            "div > div > div:nth-child(1) > span:nth-child(2)",
          );
          const ujrahElement = element.querySelector(
            "div > div > div:nth-child(2) > span:nth-child(2)",
          );
          
          if (angsuranElement)
            angsuranElement.textContent = formatCurrency(monthlyPayment);
          if (ujrahElement) ujrahElement.textContent = formatCurrency(ujrahAmount);
          
          // Update hidden input for monthly payment
          const angsuranInput = document.getElementById(`angsuran-${tenor.months}`);
          if (angsuranInput) angsuranInput.value = monthlyPayment;
        });
      }
      
      // Add event listener to slider
      nominalSlider.addEventListener("input", updateNominal);
      
      // Form validation
      const submitButton = document.getElementById("submit-button");
      const akadAgreement = document.getElementById("akad-agreement");
      const termsAgreement = document.getElementById("terms-agreement");
      
      function validateForm() {
        if (akadAgreement.checked && termsAgreement.checked) {
          submitButton.disabled = false;
        } else {
          submitButton.disabled = true;
        }
      }
      
      akadAgreement.addEventListener("change", validateForm);
      termsAgreement.addEventListener("change", validateForm);
      
      // Tenor selection
      const tenorOptions = document.querySelectorAll('input[name="tenor"]');
      tenorOptions.forEach((option) => {
        option.addEventListener("change", function () {
          // Remove selected class from all options
          document.querySelectorAll('[id^="tenor-"]').forEach((el) => {
            el.classList.remove("border-primary");
            el.classList.add("border");
          });
          
          // Add selected class to the chosen option
          const selectedTenor = document.getElementById(`tenor-${this.value}`);
          if (selectedTenor) {
            selectedTenor.classList.add("border-primary");
            selectedTenor.classList.add("border-2");
          }
          
          // Update calculations based on new tenor
          updateNominal();
        });
      });
      
      // Script untuk preview file dan ubah warna border
      function fileUploaded(input, boxId, previewId) {
        const box = document.getElementById(boxId);
        const preview = document.getElementById(previewId);
        preview.innerHTML = "";

        if (input.files.length > 0) {
          box.classList.remove('border-gray-300');
          box.classList.add('border-green-500');

          const file = input.files[0];
          const fileName = `<p class="mb-2">📄 ${file.name}</p>`;

          if (file.type.startsWith('image/')) {
            const img = document.createElement('img');
            img.src = URL.createObjectURL(file);
            img.className = "mx-auto rounded max-h-48 border border-gray-200";
            preview.innerHTML = fileName;
            preview.appendChild(img);
          } else {
            preview.innerHTML = fileName;
          }

        } else {
          box.classList.remove('border-green-500');
          box.classList.add('border-gray-300');
        }
      }
      
      // Form submission handling
      const pengajuanForm = document.getElementById('pengajuanForm');
      
      pengajuanForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Disable submit button
        submitButton.disabled = true;
        submitButton.innerHTML = '<span class="inline-block animate-spin mr-2">⟳</span> Memproses...';
        
        // Create FormData object
        const formData = new FormData(pengajuanForm);
        
        // Send form data to Formspree
        fetch('https://formspree.io/f/xnnpgyzg', {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        })
        .then(response => {
          if (response.ok) {
            // Show success message
            showSuccessModal();
          } else {
            throw new Error('Form submission failed');
          }
        })
        .catch(error => {
          console.error('Error:', error);
          alert('Terjadi kesalahan saat mengirim formulir. Silakan coba lagi.');
          submitButton.disabled = false;
          submitButton.textContent = 'Ajukan Pembiayaan Syariah';
       
